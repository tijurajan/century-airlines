(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(229)),n(r(230))},155:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=155},156:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(157),s=function(){function e(e){this.dataService=e,this.flight={id:null,name:"",number:"",description:"",capacity:null,departurecity:"",arrivalcity:"",starttime:"",endtime:""}}return e.prototype.ngOnInit=function(){},e.prototype.createFlight=function(){console.log(this.flight),this.dataService.createFlight(this.flight).subscribe(function(e){return console.log(e)}),this.flight={id:null,name:"",number:"",description:"",capacity:null,departurecity:"",arrivalcity:"",starttime:"",endtime:""}},e=n([o.Component({selector:"app-flight-create",template:r(219),styles:[r(220)]}),i("design:paramtypes",[a.DataService])],e)}();t.FlightCreateComponent=s},157:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(79),s={headers:new(r(79).HttpHeaders)({"Content-Type":"application/json",Authorization:"my-auth-token"})},c=function(){function e(e){this.http=e,this.flights=[{id:1,name:"Singapore Airlines",number:"SL317",description:"Welcome to Singapore",capacity:238}]}return e.prototype.getFlight=function(){return this.http.get("/umbraco/api/flightsdata/getflights")},e.prototype.createFlight=function(e){return this.http.post("/umbraco/api/flightsdata/createflight",e,s).pipe()},e.prototype.createBooking=function(e){return this.http.post("/umbraco/api/flightsdata/CreateBooking",e,s).pipe()},e=n([o.Injectable({providedIn:"root"}),i("design:paramtypes",[a.HttpClient])],e)}();t.DataService=c},158:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(157),s=function(){function e(e){this.dataservice=e,this.booking={flight:this.selectedFlight,lastname:"",firstname:"",passengercount:0}}return e.prototype.ngOnInit=function(){var e=this;this.dataservice.getFlight().subscribe(function(t){e.flights=t,console.log(t)})},e.prototype.createBooking=function(e){console.log(this.booking),this.booking.flight=e,this.dataservice.createBooking(this.booking).subscribe(function(e){return console.log(e)}),this.booking={flight:this.selectedFlight,lastname:"",firstname:"",passengercount:0}},e.prototype.selectFlight=function(e){this.selectedFlight=e},e=n([o.Component({selector:"app-flight-list",template:r(221),styles:[r(222)]}),i("design:paramtypes",[a.DataService])],e)}();t.FlightListComponent=s},159:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(224)),n(r(227)),n(r(228))},160:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(234))},161:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(236))},162:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(238))},163:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(164);var n=r(217),i=r(218);n.platformBrowserDynamic().bootstrapModule(i.AppModule)},164:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(165),r(188),r(216)},218:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(62),a=r(7),s=r(35),c=r(79),l=r(156),u=r(158),d=r(35),f=r(223),p=r(159),h=r(231),m=r(233),g=r(159),A=r(160),b=r(161),v=r(162),y=function(){function e(){}return e=n([i.NgModule({declarations:[h.AppComponent,A.HomeComponent,b.AdminComponent,l.FlightCreateComponent,u.FlightListComponent,v.LoginComponent],imports:[o.BrowserModule,s.ReactiveFormsModule,c.HttpClientModule,m.routing,f.NgbModule,d.FormsModule],providers:[{provide:a.APP_BASE_HREF,useValue:"/"},{provide:c.HTTP_INTERCEPTORS,useClass:g.JwtInterceptor,multi:!0},{provide:c.HTTP_INTERCEPTORS,useClass:g.ErrorInterceptor,multi:!0},p.fakeBackendProvider],bootstrap:[h.AppComponent]})],e)}();t.AppModule=y},219:function(e,t){e.exports='<div class="container" style="margin-top: 70px;">\r\n\r\n  <div class="row">\r\n\r\n    <div class="col-sm-8 offset-sm-2">\r\n\r\n      <div>\r\n        <form>\r\n          <div class="form-group">\r\n          \r\n          \r\n            <label for="name">Flight Name</label>\r\n            <input [(ngModel)]="flight.name" type="text" name="name" class="form-control" id="name" aria-describedby="nameHelp" placeholder="Enter flight name">\r\n           \r\n            \r\n            <label for="name">Flight Number</label>\r\n            <input [(ngModel)]="flight.number" type="text" name="number" class="form-control" id="name" aria-describedby="numberHelp" placeholder="Enter flight number">\r\n           \r\n           \r\n            <label for="email">Passenger Capacity</label>\r\n            <input [(ngModel)]="flight.capacity" type="number" name="capacity" class="form-control" id="capacity" aria-describedby="capacityHelp"\r\n              placeholder="Enter passenger capacity">\r\n            \r\n\r\n            \r\n\r\n            <label for="name">Departure City</label>\r\n            <input [(ngModel)]="flight.departurecity" type="text" name="departureCity" class="form-control" id="departureCity" aria-describedby="departureCityHelp" placeholder="Enter Departure City">\r\n            \r\n            <div class="form-group" style="padding-top: 20px;">\r\n                <div class="input-group">\r\n           \r\n                <label for="startTime">Flight Start Time</label>\r\n                <input class="form-control" placeholder="yyyy-mm-dd"\r\n                       name="startTime" [(ngModel)]="flight.starttime" ngbDatepicker #d1="ngbDatepicker">\r\n                <div class="input-group-append">\r\n                  <button class="btn btn-outline-secondary calendar" (click)="d1.toggle()" type="button"></button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <label for="name">Arrival City</label>\r\n            <input [(ngModel)]="flight.arrivalcity" type="text" name="arrivalCity" class="form-control" id="arrivalCity" aria-describedby="arrivalCityHelp" placeholder="Enter Arrival City">\r\n            \r\n\r\n            <div class="form-group" style="padding-top: 20px;">\r\n                <div class="input-group">\r\n                  <label for="endTime">Flight End Time</label>\r\n                  <input class="form-control" placeholder="yyyy-mm-dd"\r\n                         name="endTime" [(ngModel)]="flight.endtime" ngbDatepicker #d2="ngbDatepicker">\r\n                  <div class="input-group-append">\r\n                    <button class="btn btn-outline-secondary calendar" (click)="d2.toggle()" type="button"></button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              <label for="description">Flight Description</label>\r\n              <textarea [(ngModel)]="flight.description" name="description" class="form-control" id="description" aria-describedby="descHelp">\r\n                        </textarea>\r\n              <small id="descHelp" class="form-text text-muted">Enter your flight description</small>\r\n\r\n          </div>\r\n        </form>\r\n        <button class="btn btn-primary" (click)="createFlight()">Create flight</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<style>\r\n    /* Datepicker popup icon */\r\n\r\nbutton.calendar, button.calendar:active {\r\n  width: 2.75rem;\r\n  background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEUSURBVEiJ7ZQxToVAEIY/YCHGxN6XGOIpnpaEsBSeQC9ArZbm9TZ6ADyBNzAhQGGl8Riv4BLAWAgmkpBYkH1b8FWT2WK/zJ8ZJ4qiI6XUI3ANnGKWBnht2/ZBDRK3hgVGNsCd7/ui+JkEIrKtqurLpEWaphd933+IyI3LEIdpCYCiKD6HcuOa/nwOa0ScJEnk0BJg0UTUWJRl6RxCYEzEmomsIlPU3IPW+grIAbquy+q6fluy/28RIBeRMwDXdXMgXLj/B2uimRXpui4D9sBeRLKl+1N+L+t6RwbWrZliTTTr1oxYtzVWiTQAcRxvTX+eJMnlUDaO1vpZRO5NS0x48sIwfPc87xg4B04MCzQi8hIEwe4bl1DnFMCN2zsAAAAASUVORK5CYII=\') !important;\r\n  background-repeat: no-repeat;\r\n  background-size: 23px;\r\n  background-position: center;\r\n}\r\n\r\n/* Sortable table demo */\r\n\r\nth[sortable] {\r\n  cursor: pointer;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\nth[sortable].desc:before, th[sortable].asc:before {\r\n  content: \'\';\r\n  display: block;\r\n  background: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAmxJREFUeAHtmksrRVEUx72fH8CIGQNJkpGUUmakDEiZSJRIZsRQmCkTJRmZmJgQE0kpX0D5DJKJgff7v+ru2u3O3vvc67TOvsdatdrnnP1Y///v7HvvubdbUiIhBISAEBACQkAICAEhIAQ4CXSh2DnyDfmCPEG2Iv9F9MPlM/LHyAecdyMzHYNwR3fdNK/OH9HXl1UCozD24TCvILxizEDWIEzA0FcM8woCgRrJCoS5PIwrANQSMAJX1LEI9bqpQo4JYNFFKRSvIgsxHDVnqZgIkPnNBM0rIGtYk9YOOsqgbgepRCfdbmFtqhFkVEDVPjJp0+Z6e6hRHhqBKgg6ZDCvYBygVmUoEGoh5JTRvIJwhJo1aUOoh4CLPMyvxxi7EWOMgnCGsXXI1GIXlZUYX7ucU+kbR8NW8lh3O7cue0Pk32MKndfUxQFAwxdirk3fHappAnc0oqDPzDfGTBrCfHP04dM4oTV8cxr0SVzH9FF07xD3ib6xCDE+M+aUcVygtWzzbtGX2rPBrEUYfecfQkaFzYi6HjVnGBdtL7epqAlc1+jRdAap74RrnPc4BCijttY2tRcdN0g17w7HqZrXhdJTYAuS3hd8z+vKgK3V1zWPae0mZDMykadBn1hTQBLnZNwVrJpSe/NwEeDsEwCctEOsJTsgxLvCqUl2ACftEGvJDgjxrnBqkh3ASTvEWrIDQrwrnJpkB3DSDrGW7IAQ7wqnJtkBnLRztejXXVu4+mxz/nQ9jR1w5VB86ejLTFcnnDwhzV+F6T+CHZlx6THSjn76eyyBIOPHyDakhBAQAkJACAgBISAEhIAQYCLwC8JxpAmsEGt6AAAAAElFTkSuQmCC\') no-repeat;\r\n  background-size: 22px;\r\n  width: 22px;\r\n  height: 22px;\r\n  float: left;\r\n  margin-left: -22px;\r\n}\r\n\r\nth[sortable].desc:before {\r\n  transform: rotate(180deg);\r\n  -ms-transform: rotate(180deg);\r\n}\r\n\r\n/* Filtering table demo */\r\nngbd-table-filtering span.ngb-highlight {\r\n  background-color: yellow;\r\n}\r\n\r\n/* Complete table demo */\r\nngbd-table-complete span.ngb-highlight {\r\n  background-color: yellow;\r\n}\r\n\r\n  </style>\r\n\r\n'},220:function(e,t){e.exports=""},221:function(e,t){e.exports='<div class="container" style="margin-top: 70px;">\r\n  <table class="table table-hover">\r\n    <thead>\r\n      <tr>\r\n        \r\n        <th>Name</th>\r\n        <th>Flight No#</th>\r\n        <th>Capacity</th>\r\n        <th>From</th>\r\n        <th>Deprt.</th>\r\n        <th>To</th>\r\n        <th>Arr.</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let flight of flights">\r\n\r\n        <td>{{ flight.name }}</td>\r\n        <td> {{ flight.number }}</td>\r\n        <td> {{ flight.capacity }}</td>\r\n        <td> {{ flight.departurecity }}</td>\r\n        <td> {{ flight.starttime }}</td>\r\n        <td> {{ flight.arrivalcity }}</td>\r\n        <td> {{ flight.endtime }}</td>\r\n        <td>\r\n          <button class="btn btn-primary" (click)="selectFlight(flight)">Book</button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div class="card text-center" *ngIf="selectedFlight">\r\n      <div class="card-header">\r\n        ## {{selectedFlight.number}} ##\r\n      </div>\r\n      <div class="card-block">\r\n        <h4 class="card-title">{{selectedFlight.name}}</h4>\r\n        <p class="card-text">\r\n          {{selectedFlight.notes}}\r\n        </p> \r\n        \r\n        <div class="container" style="margin-top: 70px;">\r\n\r\n          <div class="row">\r\n        \r\n            <div class="col-sm-8 offset-sm-2">\r\n        \r\n              <div>\r\n                <form>\r\n                  <div class="form-group">\r\n                     \r\n                    <label for="fname">First Name</label>\r\n                    <input [(ngModel)]="booking.firstname" type="text" name="fname" class="form-control" id="fname" aria-describedby="fnameHelp" placeholder="Enter First Name">\r\n                \r\n                    \r\n                    <label for="lname">Last Name</label>\r\n                    <input [(ngModel)]="booking.lastname" type="text" name="lname" class="form-control" id="lname" aria-describedby="lnameHelp" placeholder="Enter Last Name">\r\n                   \r\n                   \r\n                    <label for="passengercount">Number of passengers</label>\r\n                    <input [(ngModel)]="booking.passengercount" type="number" name="passengercount" class="form-control" id="passengercount" aria-describedby="passengercountHelp"\r\n                      placeholder="Enter number of passengers">\r\n                    \r\n                    \r\n        \r\n                  </div>\r\n                </form>\r\n                <button class="btn btn-primary" (click)="createBooking(selectedFlight)">Book flight</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n</div>'},222:function(e,t){e.exports=""},224:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(60),s=r(41),c=r(71),l=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var r=this;return t.handle(e).pipe(s.catchError(function(e){-1!==[401,403].indexOf(e.status)&&(r.authenticationService.logout(),location.reload(!0));var t=e.error.message||e.statusText;return a.throwError(t)}))},e=n([o.Injectable(),i("design:paramtypes",[c.AuthenticationService])],e)}();t.ErrorInterceptor=l},225:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(79),s=r(60),c=r(41),l=function(){function e(e){this.http=e,this.currentUserSubject=new s.BehaviorSubject(JSON.parse(localStorage.getItem("currentUser"))),this.currentUser=this.currentUserSubject.asObservable()}return Object.defineProperty(e.prototype,"currentUserValue",{get:function(){return this.currentUserSubject.value},enumerable:!0,configurable:!0}),e.prototype.login=function(e,t){var r=this;return this.http.post("http://localhost:4000/users/authenticate",{username:e,password:t}).pipe(c.map(function(e){return e&&e.token&&(localStorage.setItem("currentUser",JSON.stringify(e)),r.currentUserSubject.next(e)),e}))},e.prototype.logout=function(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)},e=n([o.Injectable({providedIn:"root"}),i("design:paramtypes",[a.HttpClient])],e)}();t.AuthenticationService=l},226:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(79),s=function(){function e(e){this.http=e}return e.prototype.getAll=function(){return this.http.get("http://localhost:4000/users")},e.prototype.getById=function(e){return this.http.get("http://localhost:4000/users/"+e)},e=n([o.Injectable({providedIn:"root"}),i("design:paramtypes",[a.HttpClient])],e)}();t.UserService=s},227:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(71),s=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var r=this.authenticationService.currentUserValue;return r&&r.token&&(e=e.clone({setHeaders:{Authorization:"Bearer "+r.token}})),t.handle(e)},e=n([o.Injectable(),i("design:paramtypes",[a.AuthenticationService])],e)}();t.JwtInterceptor=s},228:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(79),a=r(60),s=r(41),c=r(137),l=function(){function e(){}return e.prototype.intercept=function(e,t){var r=[{id:1,username:"admin",password:"admin",firstName:"Admin",lastName:"User",role:c.Role.Admin},{id:2,username:"user",password:"user",firstName:"Normal",lastName:"User",role:c.Role.User}],n=e.headers.get("Authorization"),i=n&&n.startsWith("Bearer fake-jwt-token"),l=i&&n.split(".")[1],u=l?c.Role[l]:null;return a.of(null).pipe(s.mergeMap(function(){var n;if(e.url.endsWith("/users/authenticate")&&"POST"===e.method)return(o=r.find(function(t){return t.username===e.body.username&&t.password===e.body.password}))?d({id:o.id,username:o.username,firstName:o.firstName,lastName:o.lastName,role:o.role,token:"fake-jwt-token."+o.role}):(n="Username or password is incorrect",a.throwError({status:400,error:{message:n}}));if(e.url.match(/\/users\/\d+$/)&&"GET"===e.method){if(!i)return f();var o,s=e.url.split("/"),l=parseInt(s[s.length-1]),p=r.find(function(e){return e.role===u});return l!==p.id&&u!==c.Role.Admin?f():d(o=r.find(function(e){return e.id===l}))}return e.url.endsWith("/users")&&"GET"===e.method?u!==c.Role.Admin?f():d(r):t.handle(e)})).pipe(s.materialize()).pipe(s.delay(500)).pipe(s.dematerialize());function d(e){return a.of(new o.HttpResponse({status:200,body:e}))}function f(){return a.throwError({status:401,error:{message:"Unauthorised"}})}},e=n([i.Injectable()],e)}();t.FakeBackendInterceptor=l,t.fakeBackendProvider={provide:o.HTTP_INTERCEPTORS,useClass:l,multi:!0}},229:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.User="User",e.Admin="Admin"}(t.Role||(t.Role={}))},230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(){}}();t.User=n},231:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(103),s=r(71),c=r(137),l=function(){function e(e,t){var r=this;this.router=e,this.authenticationService=t,this.authenticationService.currentUser.subscribe(function(e){return r.currentUser=e})}return Object.defineProperty(e.prototype,"isAdmin",{get:function(){return this.currentUser&&this.currentUser.role===c.Role.Admin},enumerable:!0,configurable:!0}),e.prototype.logout=function(){this.authenticationService.logout(),this.router.navigate(["/login"])},e=n([o.Component({selector:"app",template:r(232)}),i("design:paramtypes",[a.Router,s.AuthenticationService])],e)}();t.AppComponent=l},232:function(e,t){e.exports='\x3c!-- nav --\x3e\n<nav class="navbar navbar-expand navbar-dark bg-dark" *ngIf="currentUser">\n    <div class="navbar-nav">\n        <a class="nav-item nav-link" routerLink="/">Home</a>\n        <a class="nav-item nav-link" routerLink="/admin" *ngIf="isAdmin">Admin</a>\n        <a class="nav-item nav-link" routerLink="/flight-list">Flight List</a>\n        <a class="nav-item nav-link" routerLink="/flight-create" *ngIf="isAdmin">Create Flight</a>\n        <a class="nav-item nav-link" (click)="logout()">Logout</a>\n    </div>\n</nav>\n\n\x3c!-- main app container --\x3e\n<div class="jumbotron">\n    <div class="container">\n        <div class="row">\n            <div class="col-md-12 ">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- credits --\x3e\n<div class="text-center">\n    <p>\n        Â© Copyright 2019. All rights reserved.\n    </p>\n    <p>\n        <a href="https://www.tijuondevbench.com/" target="_top">tijuondevbench.com</a>\n    </p>\n</div>'},233:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(103),i=r(160),o=r(161),a=r(162),s=r(158),c=r(156),l=r(240),u=r(137),d=[{path:"",component:i.HomeComponent,canActivate:[l.AuthGuard]},{path:"admin",component:o.AdminComponent,canActivate:[l.AuthGuard],data:{roles:[u.Role.Admin]}},{path:"flight-list",component:s.FlightListComponent},{path:"flight-create",component:c.FlightCreateComponent,canActivate:[l.AuthGuard],data:{roles:[u.Role.Admin]}},{path:"login",component:a.LoginComponent},{path:"**",redirectTo:""}];t.routing=n.RouterModule.forRoot(d)},234:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(41),s=r(71),c=function(){function e(e,t){this.userService=e,this.authenticationService=t,this.currentUser=this.authenticationService.currentUserValue}return e.prototype.ngOnInit=function(){var e=this;this.userService.getById(this.currentUser.id).pipe(a.first()).subscribe(function(t){e.userFromApi=t})},e=n([o.Component({template:r(235)}),i("design:paramtypes",[s.UserService,s.AuthenticationService])],e)}();t.HomeComponent=c},235:function(e,t){e.exports='<h1>Home</h1>\n<p>You\'re logged in with Angular 7 & JWT!!</p>\n<p>Your role is: <strong>{{currentUser.role}}</strong>.</p>\n<p>This page can be accessed by all authenticated users.</p>\n<div>\n    Current user from secure api end point:\n    <ul>\n        <li *ngIf="userFromApi">{{userFromApi.firstName}} {{userFromApi.lastName}}</li>\n    </ul>\n</div>'},236:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(41),s=r(71),c=function(){function e(e){this.userService=e,this.users=[]}return e.prototype.ngOnInit=function(){var e=this;this.userService.getAll().pipe(a.first()).subscribe(function(t){e.users=t})},e=n([o.Component({template:r(237)}),i("design:paramtypes",[s.UserService])],e)}();t.AdminComponent=c},237:function(e,t){e.exports='<h1>Admin</h1>\n<p>This page can only be accessed by administrators.</p>\n<div>\n    All users from secure (admin only) api end point:\n    <ul>\n        <li *ngFor="let user of users">{{user.firstName}} {{user.lastName}}</li>\n    </ul>\n</div>'},238:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(103),s=r(35),c=r(41),l=r(71),u=function(){function e(e,t,r,n){this.formBuilder=e,this.route=t,this.router=r,this.authenticationService=n,this.loading=!1,this.submitted=!1,this.error="",this.authenticationService.currentUserValue&&this.router.navigate(["/"])}return e.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({username:["",s.Validators.required],password:["",s.Validators.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},Object.defineProperty(e.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.f.username.value,this.f.password.value).pipe(c.first()).subscribe(function(t){e.router.navigate([e.returnUrl])},function(t){e.error=t,e.loading=!1}))},e=n([o.Component({template:r(239)}),i("design:paramtypes",[s.FormBuilder,a.ActivatedRoute,a.Router,l.AuthenticationService])],e)}();t.LoginComponent=u},239:function(e,t){e.exports='<div class="alert alert-info">\n    <strong>Normal User</strong> - U: user P: user<br />\n    <strong>Administrator</strong> - U: admin P: admin\n</div>\n<h2>Login</h2>\n<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">\n    <div class="form-group">\n        <label for="username">Username</label>\n        <input type="text" formControlName="username" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.username.errors }" />\n        <div *ngIf="submitted && f.username.errors" class="invalid-feedback">\n            <div *ngIf="f.username.errors.required">Username is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" formControlName="password" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }" />\n        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\n            <div *ngIf="f.password.errors.required">Password is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <button [disabled]="loading" class="btn btn-primary">Login</button>\n        <img *ngIf="loading" class="pl-2" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />\n    </div>\n    <div *ngIf="error" class="alert alert-danger">{{error}}</div>\n</form>'},240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(241))},241:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(103),s=r(71),c=function(){function e(e,t){this.router=e,this.authenticationService=t}return e.prototype.canActivate=function(e,t){var r=this.authenticationService.currentUserValue;return r?!e.data.roles||-1!==e.data.roles.indexOf(r.role)||(this.router.navigate(["/"]),!1):(this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},e=n([o.Injectable({providedIn:"root"}),i("design:paramtypes",[a.Router,s.AuthenticationService])],e)}();t.AuthGuard=c},71:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(225)),n(r(226))}},[[163,1,2]]]);